#!/usr/bin/python

import 	subprocess, os, sys, time

def main(argv):
	
	#create box file from image
	make_box(argv[0])

	#create .tr file from training tesseract using the box file	
	train(argv[0])

	#unicharset_extractor
	uchar_extract(argv[0])

	#mf and cn clustering
	cluster(argv[0])

	#wordlist2dawg frequent_words_list freq-dawg
	#wordlist2dawg words_list word-dawg


def cluster(f):
	cmd = []
	cmd.append('mftraining -U unicharset ' + f[:-4] + '.tr')
	os.system(cmd[0])


def make_box(f):
	cmd = 'tesseract ' + f + ' ' + f[:-4] + ' batch.nochop makebox'
	os.system(cmd)


def tessboxes(f):
	cmd = []
	cmd.append('convert ' + f + ' ' + f[:-4] + '.pbm') # convert [inFile] [inFile.pbm] 
	cmd.append('tessboxes ' + f[:-4] + '.pbm' + ' ' + f[:-4] + '.box > ' + f[:-4] + ".ppm") # tessboxes [inFile] [inFile.box] > [inFile.ppm]
	
	for i in cmd: 
		os.system(i)
		time.sleep(2)


def train(f):
	cmd = 'tesseract ' + f + ' ' + f[:-4] + ' batch.nochop makebox'
	os.system(cmd)


def uchar_extract(f):
	cmd = 'unicharset_extractor ' + f[:-4] '.box'
	os.system(cmd)


if __name__ == "__main__":
	main(sys.argv[1:])
